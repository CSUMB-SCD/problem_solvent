<!DOCTYPE HTML>
<!--
	Alpha by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Problems</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="/static/assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="/static/assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="/static/assets/css/ie8.css" /><![endif]-->
	</head>
	<body>
		<div id="page-wrapper">

			<!-- Header -->
			{% include "nav.html" %}

			<!-- Main -->
				<section id="main" class="container">
					<!--<header>-->
						<!--<h2>Problem Feed</h2>-->
						<!--<p>List of current unsolved community problems.</p>-->
					<!--</header>-->
					<div class="box">
						<div class="row">
							<div class="6u 12u(mobile)">
								<img style="width:100%;max-height:400px;" src="{{ problem.image.url }}" alt="" />
							</div>
							<div class="6u 12u(mobile)">
								<h3>{{ problem.title }}</h3>
								<h4>Author: {{ problem.owner.username }}</h4>
								<h4>Category: {{ problem.category.name }}</h4>
								<h4>{{ problem.points }} Points</h4>
								<p>{{ problem.description }}
								</p>
								{% if problem.owner == user %}
								<a href='/editproblem/{{ problem.id }}/'>Edit Problem</a>
								<a href='/deleteproblem/{{ problem.id }}/'>Delete Problem</a>
								{% endif %}
							</div>
						</div>
					</div>
					<div class="row">
						<div class="12u">
							<section class="box">
								<h3>Submit Your Solution</h3>
								<form method="post" action="/solution/{{ problem.id }}/"  enctype="multipart/form-data">{% csrf_token %}
								<div class="row uniform">
										<div class="12u">
											<ul class="actions">
												{{ solution_form }}
											</ul>
										</div>
									</div>

									<div class="row uniform">
										<div class="12u">
											<ul class="actions">
												<li><input type="submit" value="Submit Solution" /></li>
											</ul>
										</div>
									</div>
								</form>
								<hr />
							</section>
						</div>
					</div>
					<header>
						<h2>Solutions</h2>
					</header>
					{% for solution in solutions %}
					<div class="box">
						<div class="row">
							<div class="12u">
								<h3>{{ solution.owner.username }}</h3>
								<p>{{ solution.text }}
								</p>
								{% if solution.isChosen %}
								<p>Chosen solution!</p>
								{% endif %}
								
								{% if problem.owner.id == user.id and not solution.isChosen and not problem.isSolved %}
								<a href="/selectsolution/{{ solution.id }}">Select Solution</a>
								{% endif %}
								
								{% if problem.owner.id == user.id and solution.isChosen %}
								<a href="/deselectsolution/{{ solution.id }}">Deselect Solution</a>
								{% endif %}
								
								{% if solution.owner.id == user.id or solution.problem.owner.id == user.id %}
									{% if not solution.isChosen %}
										<a href="/delsolution/{{ solution.id }}">Delete</a>
									{% endif %}
								{% endif %}
								
							</div>
						</div>
					</div>
					{% endfor %}
					<header>
						<h2>Comments</h2>
					</header>
					{% for comment in comments %}
					<div class="box">
						<div class="row">
							<div class="12u">
								<h3>{{ comment.owner.username }}</h3>
								<p>{{ comment.text }}
								</p>
								{% if comment.owner.id == user.id or comment.problem.owner.id == user.id %}
								<a href="/delcomment/{{ comment.id }}">Delete</a>
								{% endif %}
								
							</div>
						</div>
					</div>
					{% endfor %}
					<div class="row">
						<div class="12u">
							<section class="box">
								<h3>Post Comment</h3>
								<form method="post" action="/comment/{{ problem.id }}/"  enctype="multipart/form-data">{% csrf_token %}
								<div class="row uniform">
										<div class="12u">
											<ul class="actions">
												{{ comment_form }}
											</ul>
										</div>
									</div>

									<div class="row uniform">
										<div class="12u">
											<ul class="actions">
												<li><input type="submit" value="Post Comment" /></li>
											</ul>
										</div>
									</div>
								</form>
								<hr />
							</section>
						</div>
					</div>
				</section>

			<!-- Footer -->
			{% include "footer.html" %}

		</div>

		<!-- scripts -->
	{% include "scripts.html" %}

	</body>
</html>